---
title: Инструкции за управление на програмата
author: Димо Йорданов
---

Имаме специален набор от инструкции, които нарупават идеята на Нойман за изпълнение последователно на програмата, те са branch, jum и program calls/ return. Допълнително system calls/returns. 

## Параметри на управляващите инструкции
- Ще правим ли преход само при branch
- Как се изчислява адресът на прехода
- Link return address - При подпрограми се прави
- Kак се запазват региструите и състоянията, при call/ return

## Инструкциите с които ние разполагаме са следните
- jump безусловен преход
- branch условен преход
- инструкции за извикване, връщане на подпрограми
    - call
    - return
- инструцкии за системно извикване и връщане
    - system calls
    - system returns

# Параметри на управляващите инструкции
## Щe/ Няма ли да има преход

Заради конвейера, казваме че условните преходи са доста кофти. Ако ползваме blez за проверка от следния тип if(a>0)c=b*a,то това ще наруши конвейера и ще изглеждаме по следния начин
#0 blez r1, #2
#1 mul r3, r2, r1
#2 ...

## Link return adress - преходи към подпрограми

Дуга особеност на инструкциите за ппреда е прехода към подпрограма. За да стане динамично, програмата трябва да знае с какъв преход да се върне.
В самата инструцкия не се вижда адреса на връщането, но той може да бъде сетнат. При изискване на програмата, програмния брояч се обновява. Новополучения адрес се запомня в регистъра Rx или регистъра за премълчаване Re

Друга възможност е адреса да се записва в стека, тогава при всяко извикване на програмата адреса за връщане се вкъква във върха на стека, и се записва в ПC. При всяко влизане в подпрограма трябва да пазим контекства. 

Софтуетното запазване на състоянието става преди да се викне call метода, така че като отидеме на новата програма да може да знаем на кой адрес да се върнем. Важно нещо затова е да не променяме тази клетка с информация. В края на всяка програма се вика jump с номера на регистра за да се викнеме обратно.

## Save or Restore state
Тук ние запазваме и регистрите, както при миналото но запазваме информацията в регистрите така че все едно програмата си почва от там откъдето туку що е приключила

